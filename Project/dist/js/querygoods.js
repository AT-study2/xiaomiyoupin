"use strict";function goodsp(o){return new Promise(function(t,n){ajax({url:"/mi/mtop/market/search/v2/queryIdSearch",type:"post",data:o,success:function(n){t(n)}})})}var url=location.href;-1==url.indexOf("id=")&&(location.href="../html/index.html"),-1!=url.indexOf("undefined")&&(alert("程序媛罢工啦"),location.href="../html/index.html");var id=location.search,idIndex=id.substr(id.indexOf("=")+1),ids=goodsid.filter(function(n){return n.queryId==idIndex})[0],dataString=[{},ids],jsonString=JSON.stringify(dataString),pps=goodsp(jsonString);pps.then(function(n){var t=(n=JSON.parse(n)).data.data.goods;console.log(t),document.querySelector(".querynum span").innerHTML=t.length,document.querySelector(".goodslist").innerHTML=t.map(function(n){return'\n         <div class="goods" data-id='+n.data.goodsInfo.gid+">\n                            <img src="+n.data.goodsInfo.imgSquare+'\n                                alt="" data-id='+n.data.goodsInfo.gid+'>\n                            <div class="goods-detail" >\n                                <div class="name">'+n.data.goodsInfo.name+'</div>\n                                <div class="price">\n                                    ￥\n                                    <span>'+n.data.goodsInfo.priceMin/100+"</span>\n                                    起\n                                    "+(n.data.goodsInfo.priceMin==n.data.goodsInfo.marketPrice?"":'<span class="tip">特价</span>')+"\n                                    \n                                </div>\n                            </div>\n                        </div>\n        \n        "}).join(""),t.forEach(function(n){var t={name:n.data.goodsInfo.name,price:n.data.goodsInfo.marketPrice},o=n.data.goodsInfo.gid;localStorage.setItem(o,JSON.stringify(t))})});var content=document.querySelector(".content");content.onclick=function(n){if((n=n||n.event).target.getAttribute("data-id")){var t=n.target.getAttribute("data-id");location.href="../html/details.html?id="+t}};
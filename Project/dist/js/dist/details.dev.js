"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var n=0,t=new Array(e.length);n<e.length;n++)t[n]=e[n];return t}}var url=location.href;-1==url.indexOf("id=")&&(location.href="../html/index.html");var id=location.search,idIndex=id.substr(id.indexOf("=")+1),ullist=document.querySelector(".reconmendlist ul");function p(e){var n={userRecTwo:[{},{gid:e}],topRank:[{gid:e}],shop:[{gid:e}],relateRecTwo:[{},{gid:e}],newUserWelcome:[{},{}],askInfo:{gid:e},content:[{},{gid:e,page:1,pageSize:3,type:1}],live:[{},{gid:e}],liveTwo:[{},{gid:e}],searchPlaceHolder:[{},{gid:e,baseParam:{imei:"",clientVersion:"",ypClient:1}}]},t=new XMLHttpRequest;t.open("post","/mi/mtop/arch/detail/composeTwo"),t.setRequestHeader("Content-Type","application/json;charset=UTF-8"),t.send(JSON.stringify(n)),t.onload=function(){var e=JSON.parse(t.responseText)[2].data.recommendResponseList;ullist.innerHTML=e.map(function(e){return'\n            <li>\n                                <div class="img-top">\n                                    <img src='.concat(e.data.goods.img800,'\n                                        alt="">\n                                    <p>').concat(e.data.goods.summary,'</p>\n\n                                </div>\n                                <div class="detail">\n                                    <div class="shoptitle">').concat(e.data.goods.name,'</div>\n                                    <p class="price"><span>￥</span><span class="newprice">').concat(e.data.goods.marketPrice/100,"</span></p>\n\n                                </div>\n\n                            </li>\n            \n            ")}).join("")}}var recommend=p(1*idIndex),Contentname=document.querySelector(".name"),Contentprice=document.querySelector(".price span"),idname=localStorage.getItem(idIndex),idnames=JSON.parse(idname);function p1(){return new Promise(function(n,e){ajax({url:"/mi/api/zhaoshang/productDetailService/get",type:"get",data:{gid:1*idIndex,title:"商品详情",f:"json"},success:function(e){n(e)}})})}Contentname.innerHTML=idnames.name,Contentprice.innerHTML=idnames.price/100;var imgs=p1(),swiper1=document.querySelector(".gallery-top .swiper-wrapper"),swiper2=document.querySelector(".gallery-thumbs .swiper-wrapper"),imgcontent=document.querySelector(".content-two-left-details");imgs.then(function(e){var n=(e=JSON.parse(e)).rags,t=n.filter(function(e){return"pic_link_full_default_empty"==e.editorName}).slice(0,6);swiper1.innerHTML=""==t?'<div class="swiper-slide" style = "background-image:url(https://iconfont.alicdn.com/t/5a3101e2-5a86-4fa1-ad28-0b8713b58679.png)"</div> ':t.map(function(e){return'\n        <div class="swiper-slide"\n                                style="background-image:url('.concat(e.src,')">\n                            </div>\n        ')}).join(""),swiper2.innerHTML=t.map(function(e){return'\n        <div class="swiper-slide"\n                                style="background-image:url('.concat(e.src,')">\n                            </div>\n        ')}).join(""),imgcontent.innerHTML=""!=n?n.map(function(e){return"pic_link_full_default_empty"==e.editorName?"<img src=".concat(e.src,' alt="">'):"<video src=".concat(e.src," controls></video>")}).join(""):'<img src="https://iconfont.alicdn.com/t/5a3101e2-5a86-4fa1-ad28-0b8713b58679.png" alt="">'});var galleryThumbs=new Swiper(".gallery-thumbs",{spaceBetween:10,slidesPerView:4,direction:"vertical",freeMode:!0,watchSlidesVisibility:!0,watchSlidesProgress:!0,observer:!0,observeParents:!0}),galleryTop=new Swiper(".gallery-top",{spaceBetween:10,observer:!0,observeParents:!0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},thumbs:{swiper:galleryThumbs}}),buttons=document.querySelector(".num .btn-group"),number=document.querySelector(".num .btn-group .number");function quesp(){return new Promise(function(n,e){ajax({url:"/mi/api/zhaoshang/productDetailService/get",type:"get",data:{gid:1*idIndex,title:"常见问题",f:"json"},success:function(e){n(e)}})})}buttons.onclick=function(e){(e=e||e.event).target.classList.contains("add")&&(number.innerHTML=1*number.innerHTML+1,e.target.previousElementSibling.previousElementSibling.removeAttribute("disabled")),e.target.classList.contains("del")&&(number.innerHTML=1*number.innerHTML-1,"1"==e.target.nextElementSibling.innerHTML&&e.target.setAttribute("disabled","disabled"))};var ques=quesp(),quscontent=document.querySelector(".content-two-left-question");ques.then(function(e){var n=(e=JSON.parse(e)).rags;quscontent.innerHTML=n.map(function(e){return"pic_link_full_default_empty"==e.editorName?"<img src=".concat(e.src,' alt="">'):"<video src=".concat(e.src," controls></video>")}).join("")});var li=document.querySelectorAll(".content-two-left-nav li"),div=document.querySelectorAll(".content-two-left-content div");li=_toConsumableArray(li),div=_toConsumableArray(div);for(var i=0;i<li.length;i++)li[i].index=i,li[i].onclick=function(){for(var e=0;e<li.length;e++)li[e].className=" ",div[e].style.display="none";this.className="active",div[this.index].style.display="block",scrollTo({top:500,behavior:"smooth"})};var Nav=document.querySelector(".content-two-left-nav"),headerNav=document.querySelector(".header-nav-top");window.onload=function(){document.onscroll=function(){switch(!0){case scrollY<500:headerNav.classList.remove("nav-fix-active");case scrollY<700:Nav.classList.remove("left-nav-active"),headerNav.style.width="100%";break;case 500<=scrollY:headerNav.classList.add("nav-fix-active"),Nav.style.width="774px";case 700<=scrollY:Nav.classList.add("left-nav-active")}},document.querySelector(".gettop").onclick=function(){scrollTo({top:top,behavior:"smooth"})};var e=document.cookie,n=document.querySelector(".act");if(-1!=e.indexOf("username")){var t=e.split("=")[1];n.innerHTML="\n    \n     欢迎你，".concat(t,'\n\n        <img src="https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fup.enterdesk.com%2F2021%2Fedpic%2F84%2F02%2F8d%2F84028d1d4d86a2b2fa3d5675a1acbdf9_1.jpg&refer=http%3A%2F%2Fup.enterdesk.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1635227741&t=bd82c46bcf94ae1b7afa8b8fe782926d" alt="">\n            <span class="lognout">退出登录</span>\n    ');var i=document.querySelector(".lognout");console.log(i),i.onclick=function(){console.log(1),delCookie("username"),window.location.href=location.href}}$(".post").hover(function(){$(".postActive").slideToggle()})};
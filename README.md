# 小米有品项目

#### 运用的技术/插件
1. swiper轮播图：首页商品轮播，商品详情页的详情图片轮播
2. bootstrap 5.1: 登录的表单验证、首页轮播图、以及首页和详情页部分样式
3. jq validatior:注册的验证
4.  项目部署在腾讯云轻量服务器上，开放了7722端口，后端使用phpstudy，前端使用node。

#### 使用说明

1.项目地址：http://106.55.165.14:7722/html/index.html
参考登录用户名：张三，密码：123456.l(这是小写字母L)
2.  登录后用户名信息存入cookie,渲染在头部导航栏。可通过头部导航栏进行退出，登录、注册。
3.  二级导航栏不同类别信息通过接口获取，点击二级导航栏中除热门精选的内容，可跳转至相应数据查询结果页面
4.  可通过首页或者数据查询结果页跳转至对应商品详情页。
标准完整详情页http://106.55.165.14:7722/html/details.html?id=147477
5.  通过详情页的加入购物车和立即加购可跳转至购物车 对购物车商品数据进行增删 结算 清空等功能

#### 暂未实现

1.  数据查询结果页面由于分页接口复杂，无法得知原网站分页接口参数，未实现分页功能，仅查询得一页数据
2.  详情页获取不到完整接口数据，每个页面跳转后的tab标题不一，无法通过写死的tab标题获取另一接口数据，导致部分页面有显示商品详情信息，部分没有。以及商品图片不一定获取的到。
  
#### 项目遇到的问题及解决方法

1.  首页轮播图由于是动态渲染上去的，直接初始化后不能实现轮播等功能，需要缩小、放大或者打开控制台才可。
解决方法：把初始化swiper的方法写在ajax请求后，即获取数据后再进行轮播图的初始化。或者直接在初始化swiper中添加observer: true， observeParents: true。两个方法，这是swiper中的监听方法，当修改swiper自己或子元素或其父元素时，自动初始化。
2.  页面接口参数复杂。post传参中传递的参数有数组对象类型，或者对象类型。
可以写一个数组对象或者对象存放参数，再JSON.stringify转化为json数据进行ajax请求
3.  首页渲染中获取的数据，不是所有数据都有图片，需要进行判断，筛选数据
4.  小米秒杀板块中，获取数据的时间戳为秒，需要乘1000转为毫秒再进行倒计时计算
5.  商品详情页中获取不到原网站接口数据，通过localStorage对首页商品信息的id，名字，价格进行存储，再取出渲染在详情页中
6.  页面跳转并通过id获取接口数据时出现415错误， contentType不对，原封转好的函数contentType与接口后端的不一，重新写ajax请求，并手动添加 contentType: 'application/json; charset=UTF-8'。再检查参数是否为json数据，不是则要JSON.stringify(data)
7.  由于二级导航条目数据是获取接口数据渲染的，每次滑过都会重复请求，为了减少接口请求，把第一次请求获取的数据存入本地存储中，再进行判断，本地存储中存在数据则直接获取本地存储数据渲染。
8.  购物车数据无法通过数据库获取。把商品图片价格等信息存储在本地存储，判断登录后再进行根据用户名存储商品id进入购物车数据库，把购物车数据库id与对应商品信息存入本地存储，再获取本地存储信息进行渲染。
